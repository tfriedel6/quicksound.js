var quicksound={};
(function(){function p(c){function a(){if(Audio){var a=new Audio;if(a.canPlayType){d=d.toLowerCase();if(0<=d.indexOf("ogg"))return a.canPlayType('audio/ogg; codecs="vorbis"');if(0<=d.indexOf("mp3"))return a.canPlayType("audio/mpeg");if(0<=d.indexOf("aac"))return a.canPlayType("audio/aac")||a.canPlayType("audio/x-m4a");if(0<=d.indexOf("wav"))return a.canPlayType("audio/wav");if(0<=d.indexOf("aif"))return a.canPlayType("audio/aiff")||a.canPlayType("audio/x-aiff");if(0<=d.indexOf("webm"))return a.canPlayType("audio/webm")}}return!1}if(Audio){c||
(c="webm ogg aac mp3 wav aif".split(" "));var b=null,e;for(e in c)if(c.hasOwnProperty(e)){var d=c[e],f=a(d);if("probably"==f)return d;null==b&&"maybe"==f&&(b=d)}return b}return null}function l(c,a,b){null!=a.paths&&(a.path=a.paths);if(null==a||null==a.path||null==a.doneFunc||null==a.errorFunc)return null;var e=null==a.extension?"":a.extension;if("string"==typeof a.path)return b(c,a.path+e,a);var d=[],f=0,k=0,m={},q=function(a,b){m[a.id]=b;f++;l()},h=function(){k++;l()},l=function(){f+k==d.length&&
(0<k?a.errorFunc(a,m):f==d.length&&a.doneFunc(a,m))};if(r(a.path))for(var g=0;g<a.path.length;g++)d.push(n(a.path[g],a.path[g]));else for(g in a.path)a.path.hasOwnProperty(g)&&d.push(n(a.path[g],g));for(var n=function(f,d){return b(c,f+e,{retries:a.retries,id:d,doneFunc:q,errorFunc:h})},g=0;g<d.length;g++)d[g]()}function s(c,a,b){null==b.retries&&(b.retries=3);return function(){if(XMLHttpRequest&&c&&c.decodeAudioData){var e=0,d=function(){var d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType=
"arraybuffer";d.addEventListener("load",function(){try{c.decodeAudioData(d.response,function(a){b.doneFunc&&b.doneFunc(b,a)},function(){b.errorFunc(b)})}catch(a){b.errorFunc(b)}});d.addEventListener("error",f);d.addEventListener("abort",f);d.send()},f=function(){e++<b.retries?setTimeout(function(){d()},1E3):b.errorFunc(b)};d()}else b.errorFunc(b)}}function t(c){delete c.resumePosition;c.currentSourceNode&&(c.currentSourceNode.stop?c.currentSourceNode.stop(0):c.currentSourceNode.noteOff&&c.currentSourceNode.noteOff(0),
c.currentSourceNode=null)}function u(c){function a(){var a=document.getElementById("audioSWF");null==a&&(a=document.createElement("span"),document.body.appendChild(a));a.innerHTML='<object id="audioSWF1" width="1" height="1"><param name="movie" value="quicksound-0.5.swf"><embed id="audioSWF2" src="quicksound-0.5.swf" width="1" height="1"></embed></object>'}function b(d){0<d?setTimeout(function(){var a=document.getElementById("audioSWF1");a&&a.isAvailable&&a.isAvailable()?c(a):(a=document.getElementById("audioSWF2"))&&
a.isAvailable&&a.isAvailable()?c(a):b(d-1)},100):(document.getElementById("audioSWF").removeChild(document.getElementById("audioSWF1")),0<e--?(a(),b(6)):c(null))}a();var e=4;b(6)}function v(c){for(var a=0;a<c.length;a++)if(-1!=c[a].toLowerCase().indexOf("mp3"))return c[a];return null}function w(c,a,b){return function(){function e(){function f(a){0<a?setTimeout(function(){c.isLoaded(k)?b.doneFunc(b,k):c.isError(k)?b.errorFunc(b):f(a-1)},50):d++<b.retries?setTimeout(function(){e()},1E3):b.errorFunc(b)}
var k=c.loadSound(a);f(200)}var d=0;e()}}quicksound.create=function(c,a){var b=null;try{b=new AudioContext}catch(e){try{b=new webkitAudioContext}catch(d){}}null!=b?(quicksound.bestFormat=p,quicksound.load=function(a){return l(b,a,s)},quicksound.play=function(a,c,d){var e=b;if(e){var h=e.createBufferSource();h.buffer=a;h.connect(e.destination);h.loop=d;h.start?h.start(0,c):h.noteOn&&!c&&h.noteOn(0);a.currentSourceNode=h;a.startTime=x()}},quicksound.stop=t,setTimeout(c,1)):u(function(b){null!=b?(quicksound.bestFormat=
v,quicksound.load=function(a){return l(b,a,w)},quicksound.play=function(a,c,d){b&&b.playSound(a,c,d)},quicksound.stop=function(a){b.stopSound(a)},c()):a()})};var r=Array.isArray?Array.isArray:function(c){return"[object Array]"===Object.prototype.toString.call(c)},x=Date.now?Date.now:function(){return(new Date).valueOf()}})();
